var e=function(){if(window.integrator)return window.integrator;var e=[],t=[],n={};const s=(e,t,s,r)=>{const o=r===window.parent;e||(e=s?.[0],s=s?.splice(1));var a=o?n[e]:r?.functions[e];if(!a)return;const i=window.parent;a(s,(e=>{o?i.postMessage({id:t,response:{success:!0,error:null,result:e}},"*"):r.dispatchEvent(new CustomEvent(`response.${t}`,{detail:{id:t,response:{success:!0,error:null,result:e}}}))}),(e=>{o?i.postMessage({id:t,response:{success:!0,error:null,result}},"*"):r.dispatchEvent(new CustomEvent(`response.${t}`,{detail:{id:t,response:{success:!1,error:e,result:null}}}))}))};return{install:function(e){const t=e===window.parent,n=t?"message":"execute",r=n=>{t?s(n.data?.payload?.method,n.data.id,n.data?.payload?.args,e):s(n.detail?.payload?.method,n.detail.id,n.detail?.payload?.args,e)},o=t?window:e;return o.addEventListener(n,r),()=>{o.removeEventListener(n,r)}},installHostMessageRelay:function(){window.addEventListener("message",(t=>{var n=e.filter((e=>e.contentWindow===t.source))?.at(0);if(n){if("watch"!==t.data.action)return;for(var[s,r]of Object.entries(t.data.reactiveVariables))n.dispatchEvent(new CustomEvent(`watch.${s}`,{detail:r}))}}))},register:function(e,t){null!=t&&"object"==typeof t&&!1===Array.isArray(t)&&(e!==window.parent?(e.functions=e.functions??{},Object.assign(e.functions,t)):Object.assign(n,t))},unregister:function(e,t){e?.functions[t]&&delete e?.functions[t]},update:function(e,t){if(t!==window.parent)if(t)for(var[n,s]of Object.entries(e))t.dispatchEvent(new CustomEvent(`watch.${n}`,{detail:s}));else;else window.parent.postMessage({action:"watch",reactiveVariables:e},"*")},addIframeById:function(e){var t=document.getElementById(e);this.addIframe(t)},removeIframeById:function(e){var t=document.getElementById(e);this.removeIframe(t)},addElement:function(n){const s=n?.tagName?.toLowerCase(),r="iframe"===s,o=void 0!==customElements.get(s);if(!r&&!o)return;(r?e:t).push(n);const a=e=>function(...t){return new Promise(((s,o)=>{const a=Math.random().toString(36).substring(7),i=r?"message":`response.${a}`,d=r?window:n,c=e=>r?e.data:e.detail;function u(e){r&&e.source!==n.contentWindow||c(e).id===a&&(d.removeEventListener(i,u),s(c(e).response))}d.addEventListener(i,u),r?n.contentWindow.postMessage({id:a,payload:{method:e,args:t}},"*"):n.dispatchEvent(new CustomEvent("execute",{detail:{id:a,payload:{method:e,args:t}}})),setTimeout((()=>{d.removeEventListener(i,u),o(new Error(`Timeout waiting for ${r?"iframe":"web-element"} response`))}),5e3)}))};n.call=n.call??a(),n.functions&&Object.keys(n.functions).map((e=>Object.assign(n.call,{[e]:a(e)})))},removeElement:function(n){for(var s of(n?.call&&delete n.call,[e,t])){var r=s.indexOf(n);if(-1!==r)return void s.splice(r,1)}},getIframes:function(){return e},getWebComponents:function(){return t}}}();window.integrator=window.integrator??e;