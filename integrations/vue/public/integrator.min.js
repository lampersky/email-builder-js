var e,t=(e=[],window.addEventListener("message",(t=>{var n=e.filter((e=>e.contentWindow===t.source))?.at(0);if(n){if("watch"!==t.data.action)return;for(var[a,r]of Object.entries(t.data.reactiveVariables))n.dispatchEvent(new CustomEvent(`watch.${a}`,{detail:r}))}})),{addIframeById:function(e){var t=document.getElementById(e);this.addIframe(t)},removeIframeById:function(e){var t=document.getElementById(e);this.removeIframe(t)},addIframe:function(t){e.push(t),Object.assign(t,{sendMessage(e){return new Promise(((t,n)=>{const a=this,r=Math.random().toString(36).substring(7);function s(e){e.source===a.contentWindow&&e.data.id===r&&(window.removeEventListener("message",s),t(e.data.response))}window.addEventListener("message",s),a.contentWindow.postMessage({id:r,payload:e},"*"),setTimeout((()=>{window.removeEventListener("message",s),n(new Error("Timeout waiting for child response"))}),5e3)}))}})},removeIframe:function(t){t?.sendMessage&&delete t.sendMessage;var n=e.indexOf(t);-1!==n&&e.splice(n,1)},getIframes:function(){return e}});window.integrator=window.integrator??t;